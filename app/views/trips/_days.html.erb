<% (@trip.start_date..@trip.end_date).to_a.each do |date| %>
  <div class="day">
    <div class="day-date">
      <h3><%= date.strftime("%a, %e/%m") %></h3>
      <div class="day-date-icons">
        <!-- Button trigger modal -->
        <button type="button" data-bs-toggle="modal" data-bs-target="#modal<%= date %>">
          <i class="fa-solid fa-circle-plus">
              <%# data-action="click->add-activity#add"
              data-add-activity-target="plus"> %>
              </i>
        </button>
        <i class="fa-solid fa-paperclip"></i>
      </div>
    </div>
    <%# Activities %>
    <% if @activities.any? %>
      <%# <% @activities.where(":date >= start_date AND :date <= end_date", date: date).each do |activity| %>
      <% @activities.where("DATE(start_date) = ?", date).each do |activity| %>
        <div class="day-activity">
          <div class="day-activity-info">
            <p><%= activity.start_date.strftime("%I:%M %p") %></p>
            <i class="fa-solid fa-caret-right"></i>
            <p><%= activity.name %></p>
          </div>
          <div class="day-activity-comment">
            <i class="fa-regular fa-comment-dots"></i>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="day-empty-activity"></div>
    <% end %>
  </div>

<!-- Modal -->
<div class="modal fade" id="modal<%= date %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Add a new activity</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%# Add activity %>
        <%= render "trips/add_activity", date: date %>
      </div>
    </div>
  </div>
</div>
<% end %>
